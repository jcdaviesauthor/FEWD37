
<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title></title>
    <link  rel="stylesheet" href="firebase.css" media="screen" charset="utf-8">
  </head>
  <body>

    <form id="comment-form">
      <input type="text" class="comment" placeholder="Tell Avand UR Secrets">
      <button type="submit" name="submit">Submit!</button>
    </form>

    <ul class="messages">

    </ul>

    <script src="https://cdn.firebase.com/js/client/2.2.1/firebase.js"></script>

    <script>

    var firebase = new Firebase("https://blinding-inferno-7422.firebaseio.com");
    //To prompt for username, need to save usernams in local storage
    var username = prompt("Tell us your username?");
    // var comment = document.querySelector(".comment").value;
    var formSubmit= document.querySelector("#comment-form");
    formSubmit.addEventListener("submit", submitComment);


    //call function on submit
    function submitComment (event) {
      event.preventDefault();
      var commentText = document.querySelector(".comment").value;
      //ask Jason to explain this one????????
      var ulMessages = document.querySelector(".messages");
      // alert(commentText);
      firebase.push({
        username: username,
        messageBody: commentText
      });

      //reading may need to move this outside of form submit function
      //ask Jason to explain this one????????
      firebase.on('child_added', function (snapshot) {
        var data = snapshot.val();
        // console.log(data);
        //need to move this too
        var liMessage = document.createElement("li");
        var liUsername = document.createElement("li");
        //other peoples messages
        liMessage.textContent = data.messageBody;
        liUsername.textContent = data.username;
          //ask Jason to explain this one first child????????
        ulMessages.insertBefore(liUsername,ulMessages.firstChild);
        ulMessages.insertBefore(liMessage, ulMessages.firstChild);

        formSubmit.reset();
      });

      // create a new <li> with text in with the message and author
      // var div = document.createElement("div");

      // var label = document.createElement("label");
      // var label2 = document.createElement("label2");
      // var commentInput = document.createElement("input");
      // var displayUsername = document.createElement("username");
      // checkbox.setAttribute("type", "checkbox");

      // label.appendChild(commentInput);
      // label2.appendChild(displayUsername);
      // li.appendChild(label);
      // li2.appendChild(label2);
    };


    </script>

  </body>

</html>
